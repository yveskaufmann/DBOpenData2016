"use strict";L.Control.MousePosition=L.Control.extend({options:{position:"bottomleft",separator:" : ",emptyString:"Unavailable",lngFirst:!1,numDigits:5,lngFormatter:void 0,latFormatter:void 0,prefix:""},onAdd:function(t){return this._container=L.DomUtil.create("div","leaflet-control-mouseposition"),L.DomEvent.disableClickPropagation(this._container),t.on("mousemove",this._onMouseMove,this),this._container.innerHTML=this.options.emptyString,this._container},onRemove:function(t){t.off("mousemove",this._onMouseMove)},_onMouseMove:function(t){var a=this.options.lngFormatter?this.options.lngFormatter(t.latlng.lng):L.Util.formatNum(t.latlng.lng,this.options.numDigits),e=this.options.latFormatter?this.options.latFormatter(t.latlng.lat):L.Util.formatNum(t.latlng.lat,this.options.numDigits),i=this.options.lngFirst?a+this.options.separator+e:e+this.options.separator+a,o="Lng,Lat = "+this.options.prefix+" "+i+"<br> "+window.cityBikeMap.getData({x:t.layerPoint.x,y:t.layerPoint.y});this._container.innerHTML=o}}),L.Map.mergeOptions({positionControl:!1}),L.Map.addInitHook(function(){this.options.positionControl&&(this.positionControl=new L.Control.MousePosition,this.addControl(this.positionControl))}),L.control.mousePosition=function(t){return new L.Control.MousePosition(t)},function(t,a){function e(){this.$map=t("#map"),this.heatmapSinkCfg={radius:i,maxOpacity:.8,scaleRadius:!0,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"count",gradient:{".0":"red",.98:"red"}},this.heatmapSourceCfg={radius:i,maxOpacity:.8,scaleRadius:!0,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"count",gradient:{".0":"purple",.98:"purple"}},this.heatmapInCfg={radius:i,maxOpacity:.6,scaleRadius:!0,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"count",gradient:{".95":"red",".99":"orange"}},this.heatmapInterCfg={radius:i,maxOpacity:.4,scaleRadius:!0,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"count",gradient:{".82":"blue",".95":"orange"}},this.heatmapOutCfg={radius:i,maxOpacity:.6,scaleRadius:!0,useLocalExtrema:!0,latField:"lat",lngField:"lng",valueField:"count",gradient:{".82":"blue",".95":"pink"}}}var i=.003;e.prototype.start=function(){this.initShowLocationView()},e.prototype.getData=function(t){return[["Sink",this.heatmapSinkLayer],["Source",this.heatmapSourceLayer],["Ankommende Fahrr채der",this.heatmapInLayer],["Ausgehende Fahrr채der",this.heatmapOutLayer],["Pfade",this.interpolatedLayer]].map(function(a){return a[0]+" = "+a[1]._heatmap.getValueAt(t)}).join("  <br>  ")},e.prototype.initShowLocationView=function(){this.osmLayer=a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://osm.org/copyright">OpenStreetMap</a> contributors'}),this.heatmapSinkLayer=new HeatmapOverlay(this.heatmapSinkCfg),this.heatmapSourceLayer=new HeatmapOverlay(this.heatmapSourceCfg),this.heatmapInLayer=new HeatmapOverlay(this.heatmapInCfg),this.heatmapOutLayer=new HeatmapOverlay(this.heatmapOutCfg),this.interpolatedLayer=new HeatmapOverlay(this.heatmapInterCfg),this.map=a.map(this.$map.get(0),{zoom:20,maxZoom:26,minZoom:3,center:[52.505,13.09],layers:[this.osmLayer,this.heatmapSinkLayer,this.heatmapSourceLayer,this.heatmapInLayer,this.heatmapOutLayer,this.interpolatedLayer]});var t={Map:this.osmLayer},e={Sink:this.heatmapSinkLayer,Source:this.heatmapSourceLayer,"Ankommende Fahrr채der":this.heatmapInLayer,"Ausgehende Fahrr채der":this.heatmapOutLayer,Pfade:this.interpolatedLayer},i={collapsed:!1};a.control.layers(t,e,i).addTo(this.map),a.control.mousePosition().addTo(this.map),this.locateControl=a.control.locate({position:"topleft",keepCurrentZoomLevel:!1,locateOptions:{maxZoom:13}}).addTo(this.map),this.heatmapInLayer.setData(bookingStarts),this.heatmapOutLayer.setData(bookingEnds),this.heatmapSourceLayer.setData(bookingSources),this.heatmapSinkLayer.setData(bookingSinks),this.interpolatedLayer.setData(interpolated),this.locateControl.start()},this.cityBikeMap=new e,this.cityBikeMap.start()}.call(window,jQuery,L);